(()=>{"use strict";const e=class{constructor(e,t="div",n="",s="",i="",a=!1){const o=document.createElement(t);o.id=s,o.className=n,o.textContent=i,e&&e.append(o),a&&(o.style.display=localStorage.getItem("token")?"block":"none"),this.node=o}destroyСontent(e){for(;e.firstChild;)e.removeChild(e.firstChild)}destroyNode(){this.node.remove()}},t="На главную",n="Регистрация",s="О проекте",i="Спринт",a="Аудио-вызов",o=class extends e{constructor(){super(null);const n=document.createElement("div");n.classList.add("info-container");const s=document.getElementById("main");s&&s.append(n);const i=document.createElement("h2");i.classList.add("info-container__title"),i.innerHTML="RS Lang – приложение для изучения иностранных слов";const a=document.createElement("div");a.classList.add("info-container__cards-container");const o=document.createElement("div");o.classList.add("cards-container__info-card");const r=document.createElement("h7");r.innerHTML="Узнавай новое";const d=document.createElement("img");d.src="../assets/svg/bx-book-bookmark.svg";const c=document.createElement("p");c.innerHTML="В учебнике собраны 3600 самых используемых в повседневной жизни слов, есть его определение и пример как на русском так и на английском";const l=document.createElement("div");l.classList.add("cards-container__info-card");const m=document.createElement("h7");m.innerHTML="Играй";const u=document.createElement("img");u.src="../assets/svg/game-controller-gamepad-svgrepo-com.svg";const p=document.createElement("p");p.innerHTML="Обучайся играя - не скучно и эффективно в любом возрасте";const h=document.createElement("div");h.classList.add("cards-container__info-card");const g=document.createElement("h7");g.innerHTML="Следи за прогрессом";const w=document.createElement("img");w.src="../assets/svg/progress-report-svgrepo-com.svg";const y=document.createElement("p");y.innerHTML="Личная статистика поможет следить за своим прогрессом: какие слова ты уже изучил, а к каким стоит вернуться",n.append(i),n.append(a),a.append(o),o.append(r),o.append(d),o.append(c),a.append(l),l.append(m),l.append(u),l.append(p),a.append(h),h.append(g),h.append(w),h.append(y),new e(n,"button","button route-btn route-btn_main","",`${t}`).node.onclick=()=>{this.onStartPage()}}};var r,d,c;!function(e){e.words="words",e.users="users",e.tokens="tokens",e.aggregatedWords="aggregatedWords",e.statistics="statistics",e.settings="settings",e.signin="signin"}(r||(r={})),function(e){e.sprint="sprint",e.audiocall="audiocall"}(d||(d={})),function(e){e.easiest="0",e.easy="1",e.moreThenEasy="2",e.normal="3",e.hard="4",e.hardest="5"}(c||(c={}));const l="https://rslangbackend.herokuapp.com",m={wordsEndpoint:`${l}/${r.words}`,usersEndpoint:`${l}/${r.users}`,signinEndpoint:`${l}/${r.signin}`,HEADERS_FOR_REQUESTS_WITH_AUTH:{Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-type":"application/json; charset=utf-8"},HEADERS_FOR_REQUESTS_WITHOUT_AUTH:{Accept:"application/json","Content-type":"application/json"}},u=async(e,t)=>await fetch(`${m.wordsEndpoint}?group=${e}&page=${t}`,{method:"GET",headers:m.HEADERS_FOR_REQUESTS_WITHOUT_AUTH}).then((e=>e.json())).then((e=>e));async function p(t,n){const s=await u(t,n),i=document.getElementById("cards-container");s.map((t=>{const n=document.createElement("div");n.classList.add("card-container"),i?.append(n);const s=document.createElement("img");s.classList.add("card__image"),s.setAttribute("src",`https://rslangbackend.herokuapp.com/${t.image}`),n.append(s);const a=document.createElement("div");a.classList.add("card-text"),n.append(a);const o=document.createElement("audio"),r=document.createElement("div");r.classList.add("card-audio-btn","pause");const d=[`https://rslangbackend.herokuapp.com/${t.audio}`,`https://rslangbackend.herokuapp.com/${t.audioMeaning}`,`https://rslangbackend.herokuapp.com/${t.audioExample}`].map((e=>fetch(e).then((e=>e.blob()))));Promise.all(d).then((e=>{const t=new Blob([e[0],e[1],e[2]]),n=URL.createObjectURL(t);o.src=n})),r.onclick=()=>{r.classList.toggle("pause"),r.classList.toggle("play"),o.paused?o.play():(o.pause(),o.currentTime=0),o.currentTime=0},o.addEventListener("ended",(function(){o.currentTime=0,r.classList.remove("play"),r.classList.add("pause")}));const c=document.getElementsByTagName("audio"),l=document.getElementsByClassName("card-audio-btn");document.addEventListener("play",(function(e){for(let t=0,n=c.length;t<n;t+=1)c[t]!==e.target&&(c[t].pause(),c[t].currentTime=0,l[t].classList.remove("play"),l[t].classList.add("pause"))}),!0);const m=document.createElement("h5");m.classList.add("card__header"),m.innerHTML=`${t.word}-${t.transcription}`;const u=document.createElement("h6");u.classList.add("card__word-translate"),u.innerHTML=`${t.wordTranslate}`;const p=document.createElement("h6");p.classList.add("card__text-meaning"),p.innerHTML=`${t.textMeaning}`;const h=document.createElement("h6");h.classList.add("card__text-meaning-translate"),h.innerHTML=`${t.textMeaningTranslate}`;const g=document.createElement("h6");g.classList.add("card__text-example"),g.innerHTML=`${t.textExample}`;const w=document.createElement("h6");w.classList.add("card__text-example-translate"),w.innerHTML=`${t.textExampleTranslate}`;const y=document.createElement("div");y.id=`btns-container_${t.id}`,y.classList.add("card__btns"),a.append(y);const E=new e(document.getElementById(`btns-container_${t.id}`),"span","card__btn button card__btn_difficult","","",!0);E.node.onclick=()=>{E.node.classList.toggle("selected")};const S=new e(document.getElementById(`btns-container_${t.id}`),"span","card__btn button card__btn_studied","","",!0);S.node.onclick=()=>{S.node.classList.toggle("selected"),a.classList.toggle("studied")},a.append(m),m.append(r),m.append(o),a.append(u),a.append(p),a.append(h),a.append(g),a.append(w)}))}const h=["Раздел 1","Раздел 2","Раздел 3","Раздел 4","Раздел 5","Раздел 6","Сложные слова"],g=["rgb(165, 214, 167)","rgb(129, 212, 250)","rgb(159, 168, 218)","rgb(188, 170, 164)","rgb(255, 204, 128)","rgb(239, 154, 154)","rgb(240, 70, 70)"],w=["Страница 1","Страница 2","Страница 3","Страница 4","Страница 5","Страница 6","Страница 7","Страница 8","Страница 9","Страница 10","Страница 11","Страница 12","Страница 13","Страница 14","Страница 15","Страница 16","Страница 17","Страница 18","Страница 19","Страница 20","Страница 21","Страница 22","Страница 23","Страница 24","Страница 25","Страница 26","Страница 27","Страница 28","Страница 29","Страница 30"];function y(e){const t=document.getElementById("cards-container");if(t)for(;t.firstChild;)t.removeChild(t.firstChild);localStorage.getItem("textbookSection")&&"0"!==localStorage.getItem("textbookSection")?p(`${localStorage.getItem("textbookSection")}`,`${e}`):p("0",`${e}`),localStorage.setItem("textbookPage",`${e}`)}const E=class extends e{constructor(){super(null);const n=document.createElement("div");n.classList.add("textbook-container"),n.id="textbook-container";const s=document.createElement("div");s.classList.add("cards-container"),s.id="cards-container";const o=document.createElement("div");o.classList.add("textbook-navigation"),o.id="textbook-navigation";const r=document.getElementById("main");r&&(r.append(n),n.append(o),n.append(s));const d=new e(o,"button","button route-btn route-btn_main","textbook-on-start-page",`${t}`),c=new e(o,"button","sprint-button-ebook button route-btn","sprint-button-ebook",`${i}`,!0),l=new e(o,"button","audiocall-button-ebook button route-btn","audiocall-button-ebook",`${a}`,!0);d.node.onclick=()=>{this.onStartPage()},c.node.onclick=()=>this.onSprint(),l.node.onclick=()=>this.onAudioCall(),function(e){const t=document.createElement("div");t.id="textbook-select-container",t.classList.add("textbook-select-container"),e.appendChild(t);const n=document.createElement("select");n.id="textbook-section-select",n.classList.add("textbook-section-select"),t.appendChild(n);for(let e=0;e<h.length;e+=1){if(e!==h.length-1){const t=document.createElement("option");t.value=h[e],t.text=h[e],n.appendChild(t)}if(e===h.length-1&&localStorage.getItem("token")){const t=document.createElement("option");t.value=h[e],t.text=h[e],n.appendChild(t)}}}(o),function(e){const t=document.createElement("div");t.id="textbook-pages-select-container",t.classList.add("textbook-pages-select-container"),e.appendChild(t);const n=document.createElement("select");n.id="textbook-pages-select",n.classList.add("textbook-pages-select");const s=document.createElement("button");s.id="textbook-pages-minus",s.classList.add("textbook-pages-minus"),t.appendChild(s),t.appendChild(n);const i=document.createElement("button");i.id="textbook-pages-plus",i.classList.add("textbook-pages-plus"),t.appendChild(i);for(let e=0;e<w.length;e+=1){const t=document.createElement("option");t.value=w[e],t.text=w[e],n.appendChild(t)}let a=0;const o=w.length-1;s.onclick=()=>{a=n.selectedIndex,a>0&&(a-=1,n.selectedIndex=a),a!==localStorage.getItem("textbookPage")&&y(a)},i.onclick=()=>{a=n.selectedIndex,a<o&&(a+=1,n.selectedIndex=a),a!==localStorage.getItem("textbookPage")&&y(a)}}(o);const m=document.getElementById("textbook-section-select"),u=document.getElementById("textbook-pages-select");let E="0",S="0";localStorage.getItem("textbookSection")&&"0"!==localStorage.getItem("textbookSection")?(S=localStorage.getItem("textbookSection"),m.selectedIndex=localStorage.getItem("textbookSection"),m.style.background=g[localStorage.getItem("textbookSection")]):(S="0",localStorage.setItem("textbookSection","0"),m.selectedIndex=0,m.style.background=g[0]),localStorage.getItem("textbookPage")&&"0"!==localStorage.getItem("textbookPage")?(E=localStorage.getItem("textbookPage"),u.selectedIndex=localStorage.getItem("textbookPage")):(E="0",localStorage.setItem("textbookPage","0"),u.selectedIndex=0),p(`${S}`,`${E}`),m&&(m.onchange=()=>{const e=m.selectedIndex;for(m.style.background=g[e];s.firstChild;)s.removeChild(s.firstChild);p(`${e}`,"0"),localStorage.setItem("textbookSection",`${e}`),u&&(localStorage.setItem("textbookPage","0"),u.selectedIndex=0)}),u&&(u.onchange=()=>{const e=u.selectedIndex;for(;s.firstChild;)s.removeChild(s.firstChild);p(`${S}`,`${e}`),localStorage.setItem("textbookPage",`${e}`)})}},S={main:"Главная",ebook:"Учебник",sprint:"Спринт",audioTask:"Аудио вызов",team:"О команде",statistics:"Статистика"};function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(t,n){const s=new e(document.getElementById("nav"),"a","side-navigation__link",`${t}Page`,`${S.linkName}`);return"main"===t?s.node.setAttribute("href","/"):s.node.setAttribute("href",`/${t}`),s.node.classList.add(`side-navigation__link_${t}`),s.node.innerText=n,s.node.onclick=e=>e.preventDefault(),s}function f(e){return Math.floor(Math.random()*e)}class $ extends e{constructor(){super(null),this.main=document.getElementById("main"),this.generateMainContent(),this.createLink=b,this.navGeneration(),document.querySelector(".side-navigation__link_main").addEventListener("click",(()=>{this.destroyСontent(document.getElementById("main")),this.generateMainContent()})),document.querySelector(".side-navigation__link_ebook").addEventListener("click",(()=>{this.onTextbookPage()})),document.querySelector(".side-navigation__link_sprint").addEventListener("click",(()=>{this.onSprint()})),document.querySelector(".side-navigation__link_audioTask").addEventListener("click",(()=>{this.onAudioCall()})),document.querySelector(".side-navigation__link_team").addEventListener("click",(()=>{this.onAboutPage()})),document.querySelector(".side-navigation__link_statistics").addEventListener("click",(()=>{this.onStatPage()}));const e=document.getElementById("statisticsPage");localStorage.getItem("token")?e.style.display="inline-block":e&&(e.style.display="none")}navGeneration(){Object.entries(S).forEach((e=>{this.createLink(e[0],e[1])}))}render(){const e=document.createElement("h1");e.classList.add("main-ui__title"),e.innerText="RSLang",this.main.append(e);const t=document.createElement("div");t.classList.add("main-ui__btns"),t.id="main-btns",this.main.append(t)}generateMainContent(){this.render(),new e(document.getElementById("main-btns"),"button","main__btn button","",`${n}`).node.onclick=()=>this.onRegistration(),new e(document.getElementById("main-btns"),"button","main__btn button","",`${s}`).node.onclick=()=>this.onProjectInfo()}}const v=class extends e{constructor(){super(null);const n=document.createElement("div");n.classList.add("info-container");const s=document.getElementById("main");n.innerHTML="\n      <h2 class='info-container__title'>О команде</h2>\n      <div class='info-container__content content'>\n        <div class='content-card'>\n          <div class='img-wrap'>\n            <img class='content-img' alt='' src='https://avatars.githubusercontent.com/u/86509140?v=4'>\n          </div>\n          <div class='content-card__title'>Григорий Яворский</div>\n          <a href='https://github.com/GrigoriyYav' class='content-card__github'>GrigoriyYav</a>\n          <div class=''>Разработчик</div>\n          <ul class='content-card__list list-task'>\n            <li class='list-task__item'>1. Архитектура</li>\n            <li class='list-task__item'>2. Учебник</li>\n            <li class='list-task__item'>3. О команде</li>\n            <li class='list-task__item'>4. Вёрстка</li>\n          </ul>\n        </div>\n        <div class='content-card'>\n          <div class='img-wrap'>\n            <img class='content-img' alt='' src='../../assets/team/photo.jpeg'>\n          </div>\n          <div class='content-card__title'>Сергей Мангилев</div>\n          <a href='https://github.com/ssmangilev' class='content-card__github'>ssmangilev</a>\n          <div class=''>Разработчик</div>\n          <ul class='content-card__list list-task'>\n            <li class='list-task__item'>1. Backend</li>\n            <li class='list-task__item'>2. Регистрация</li>\n            <li class='list-task__item'>3. Спринт</li>\n            <li class='list-task__item'>4. Аудио-вызов</li>\n          </ul>\n        </div>\n        <div class='content-card'>\n          <div class='img-wrap'>\n            <img class='content-img' alt='' src='../../assets/team/photo2.jpg'>\n          </div>\n          <div class='content-card__title'>Денис Калинин</div>\n          <a href='https://github.com/hokmyn' class='content-card__github'>hokmyn</a>\n          <div class=''>Разработчик</div>\n          <ul class='content-card__list list-task'>\n            <li class='list-task__item'>1. Верстка</li>\n            <li class='list-task__item'>2. Главная страница</li>\n            <li class='list-task__item'>3. Навигация</li>\n            <li class='list-task__item'></li>\n          </ul>\n        </div>\n      </div>\n    ",s&&s.append(n),new e(n,"button","button route-btn route-btn_main","",`${t}`).node.onclick=()=>{this.onStartPage()},document.querySelector(".side-navigation__link_main").addEventListener("click",(()=>{this.onStartPage()}))}};class k{constructor(e,t,n,s,i,a){this.container=e,this.title=t,this.id=n,this.elements=s,this.action=i,this.saveCallback=a,this.closeCallBack=()=>{const e=document.getElementById(this.id);this.elements.forEach((e=>{document.getElementById(`${e.name}-${this.id}`).value="";const t=document.getElementById(`errors-${e.name}-${this.id}`);t.innerHTML="",t.style.display="none"})),e.style.display="none"}}listen(){const e=document.createElement("div");document.body.appendChild(e),e.id=`${this.id}-alert-success`,e.className="alert-success",e.innerHTML=`${this.action} successfully completed`;const t=document.getElementById(this.id);window.addEventListener("click",(e=>{e.target===t&&this.closeCallBack()}));const n=document.getElementById(`close-modal-${this.id}`),s=document.getElementById(`modal-cancel-${this.id}`);n.addEventListener("click",(()=>{this.closeCallBack()})),s.addEventListener("click",(()=>{this.closeCallBack()})),document.getElementById(`submit_${this.id}`).addEventListener("click",(async()=>{const n=document.getElementById(`modal-form-${this.id}`),s=[];this.elements.forEach((e=>{n[e.name]&&s.push(n[e.name].value)}));try{if(3===s.length&&s[0]&&s[1]&&s[2]){const n=await this.saveCallback(s[0],s[1],s[2]);n.id?(e.style.display="block",setTimeout((()=>{e.style.display="none"}),3e3),t.style.display="none",window.location.reload()):this.elements.forEach((e=>{if(n&&-1!==Object.keys(n).indexOf(e.name)){const t=document.getElementById(`errors-${e.name}-${this.id}`);"email"===e.name?t.innerHTML=`${n.email}`:"password"===e.name&&(t.innerHTML=`${n.password}`),t.style.display="block"}}))}if(2===s.length&&s[0]&&s[1]){const n=await this.saveCallback(s[0],s[1]);n&&-1!==Object.keys(n).indexOf("token")?(e.style.display="block",setTimeout((()=>{e.style.display="none"}),3e3),t.style.display="none",window.location.reload(),document.getElementById("button-login").classList.add("logout")):this.elements.forEach((e=>{if(n&&-1!==Object.keys(n).indexOf(e.name)){const t=document.getElementById(`errors-${e.name}-${this.id}`);"email"===e.name?t.innerHTML=`${n.email}`:"password"===e.name&&(t.innerHTML=`${n.password}`),t.style.display="block"}}))}}catch(e){console.log(e)}}))}render(){if(document.getElementById(this.id))return;const e=document.createElement("div");e.id=this.id,e.className="modal";const t=document.createElement("form");e.appendChild(t),t.className="modal-content modal-animate",t.id=`modal-form-${this.id}`,t.noValidate=!0;const n=document.createElement("div"),s=document.createElement("span");n.className="modal-header-container";const i=document.createElement("h3");i.className="modal-title",i.innerHTML=I(this.action),s.className="close-modal",s.id=`close-modal-${this.id}`,s.title="Close Modalwindow",s.innerHTML="x",n.appendChild(i),n.appendChild(s),t.appendChild(n);const a=document.createElement("div");a.className="container";const o=document.createElement("button");o.innerHTML=this.action,o.type="button",o.id=`submit_${this.id}`,this.elements.forEach((e=>{const t=document.createElement("label"),n=document.createElement("input"),s=document.createElement("b"),i=document.createElement("div");i.id=`errors-${e.name}-${this.id}`,i.className="alert-error",i.style.display="none",s.innerHTML=I(e.name),t.appendChild(s),n.type=e.type,n.id=`${e.name}-${this.id}`,n.name=e.name,n.placeholder=e.placeholder,n.required=e.required,t.htmlFor=e.name,e.minLength&&(n.minLength=e.minLength),e.maxLength&&(n.maxLength=e.maxLength),a.appendChild(i),a.appendChild(t),a.appendChild(n)})),a.appendChild(o),t.appendChild(a);const r=document.createElement("div");r.className="modal-footer-container";const d=document.createElement("button");d.className="modal-cancel-button",d.id=`modal-cancel-${this.id}`,d.innerHTML="Cancel",r.appendChild(d),t.appendChild(r),document.body.appendChild(e),this.listen()}}async function _(e,t,n){try{const s={name:t,email:e,password:n},i=await fetch(`${m.usersEndpoint}`,{method:"POST",headers:m.HEADERS_FOR_REQUESTS_WITHOUT_AUTH,body:JSON.stringify(s)});if(i.ok&&200===i.status){const e=await i.json();console.log(e)}if(417===i.status)return{email:"User with this email exists"};const a=await i.json();if(422===i.status){const e=a.error.errors,t={};return e.forEach((e=>{"email"===e.path[0]&&(t.email=e.message),"password"===e.path[0]&&(t.password=e.message)})),t}return console.log(a),a}catch(e){console.log(e)}}async function L(e){const t={Authorization:`Bearer ${localStorage.getItem("refreshToken")||""}`,Accept:"application/json","Content-type":"application/json; charset=utf-8"};try{const n=await fetch(`${m.usersEndpoint}/${e}/tokens`,{headers:t}),s=await n.json();localStorage.setItem("token",s.token),localStorage.setItem("refreshToken",s.refreshToken)}catch(e){console.log(e)}}async function T(e){try{const t=await fetch(`${m.usersEndpoint}/${e}/words`,{headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH});return 401===t.status&&(L(e),T(e)),await t.json()}catch(e){return e}}async function C(e,t,n){try{const s=JSON.stringify(n),i=await fetch(`${m.usersEndpoint}/${e}/words/${t}`,{method:"POST",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH,body:s});return 401===i.status&&(L(e),C(e,t,n)),await i.json()}catch(e){return e}}async function A(e,t,n){try{const s=JSON.stringify(n),i=await fetch(`${m.usersEndpoint}${e}/words/${t}`,{method:"PUT",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH,body:s});return 401===i.status&&(L(e),A(e,t,n)),await i.json()}catch(e){return e}}async function x(e){try{const t=await fetch(`${m.usersEndpoint}/${e}/statistics`,{method:"GET",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH});return 401===t.status&&(L(e),x(e)),404===t.status?null:await t.json()}catch(e){return e}}async function H(e,t){try{const n=JSON.stringify(t),s=await fetch(`${m.usersEndpoint}/${e}/statistics`,{method:"PUT",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH,body:n});return 401===s.status&&(L(e),H(e,t)),await s.json()}catch(e){return e}}async function B(e){try{const t=await fetch(`${m.usersEndpoint}/${e}/aggregatedWords?wordsPerPage=3600&filter={"$and":[{"userWord":{"$ne": null}, "userWord.optional.newWord":{"$ne": null}}]}`,{method:"GET",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH});401===t.status&&(L(e),B(e));return(await t.json())[0].paginatedResults?.map((e=>e.id))||[]}catch(e){return e}}async function R(e){try{const t=await fetch(`${m.usersEndpoint}/${e}/aggregatedWords?wordsPerPage=3600&filter={"$and":[{"userWord":{"$ne": null}, "userWord.difficulty":"easy"}]}`,{method:"GET",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH});401===t.status&&(L(e),R(e));return(await t.json())[0].paginatedResults?.map((e=>e.id))||[]}catch(e){return e}}async function M(e,t){const n={email:e,password:t};try{const t=await fetch(`${m.signinEndpoint}`,{method:"POST",body:JSON.stringify(n),headers:m.HEADERS_FOR_REQUESTS_WITHOUT_AUTH});if(t.ok&&200===t.status){const e=await t.json();return Object.entries(e).forEach((e=>{"message"!==e[0]&&localStorage.setItem(e[0],e[1])})),e}return 404===t.status?{email:`Could not find user with a email ${e}`}:{email:"Please check your email",password:"Please check your password"}}catch(e){return e}}class N{constructor(){this.burgerIcon=document.querySelector(".top-navigation-ui"),this.nav=document.getElementById("nav"),this.loginBtn=document.getElementById("button-login")}addListeners(){this.burgerIcon.addEventListener("click",(()=>{this.burgerIcon.classList.toggle("opened"),this.nav.classList.toggle("opened")})),this.loginBtn.addEventListener("click",(()=>{this.loginBtn.classList.contains("logout")&&(localStorage.clear(),window.location.reload())})),window.addEventListener("load",(()=>{localStorage.getItem("token")&&this.loginBtn.classList.add("logout")}))}}class W{constructor(e,t,n,s){(n||0===n)&&(this.group=n),(s||0===s)&&(this.page=s),this.container=e,this.type=t,this.questionIndex=0,this.correctAnswersInRow=0,this.generatedQuestions=void 0,this.time=60,this.score=0,this.rightAnswers=0,this.wrongAnswers=0,this.longestRightSeries=0,this.rightAnswersArray=[],this.wrongAnswersArray=[],this.userNewWords=[],this.userWords=[],this.learnedWords=0}async updateWordStats(e,t){let n;if(this.userWords){const e=(s=this.userWords,i="wordId",(s||[]).reduce(((e,t)=>({...e,[t[i]]:t})),{}));n=e[t.rightAnswer.id]?e[t.rightAnswer.id]:{difficulty:"medium",optional:{isHard:!1,isLearned:!1,sprint:{right:0,wrong:0,rightInRow:0},audioCall:{right:0,wrong:0,rightInRow:0}}}}else n={difficulty:"medium",optional:{isLearned:!1,isHard:!1,sprint:{right:0,wrong:0,rightInRow:0},audioCall:{right:0,wrong:0,rightInRow:0}}};var s,i;n.optional.newWord||(n.optional.newWord=(new Date).toISOString().split("T")[0]),e&&(this.type===d.sprint&&(n.optional.sprint.rightInRow+=1,n.optional.sprint.right+=1),this.type===d.audiocall&&(n.optional.audioCall.rightInRow+=1,n.optional.audioCall.right+=1),n.optional.sprint||n.optional.audioCall)&&("medium"===n.difficulty&&3===(n.optional.sprint.rightInRow||0)+(n.optional.audioCall.rightInRow||0)&&(n.difficulty="easy",[n.optional.isLearned]=(new Date).toISOString().split("T"),this.learnedWords+=1),"hard"===n.difficulty&&5===(n.optional.sprint.rightInRow||0)+(n.optional.audioCall.rightInRow||0)&&(n.difficulty="easy",[n.optional.isLearned]=(new Date).toISOString().split("T"),this.learnedWords+=1)),e||(this.type===d.sprint&&(n.optional.sprint.rightInRow=0,n.optional.sprint.wrong+=1),this.type===d.audiocall&&(n.optional.audioCall.rightInRow=0,n.optional.audioCall.wrong+=1),(n.optional.sprint||n.optional.audioCall)&&"easy"===n.difficulty&&(n.difficulty="medium",n.optional.isLearned=!1,this.learnedWords-=1)),n.id?(delete n.id,delete n.wordId,await A(localStorage.getItem("userId")||"",t.rightAnswer.id,n)):await C(localStorage.getItem("userId")||"",t.rightAnswer.id,n)}renderTitle(){this.container.id=`${this.type}`;const e=document.createElement("div");e.id=`${this.type}-score`,e.className="game-score",e.innerHTML=`Текущий счёт: ${this.score}`;const t=document.createElement("div");t.id=`${this.type}-difficulty-container`,t.className="difficulty-container";const n=document.createElement("div");n.id=`${this.type}-difficulty-header`,n.className="difficulty-header";const s=document.createElement("p");s.id=`${this.type}-game-title`,s.className="difficulty-container-title";const i=document.createElement("p");i.id=`${this.type}-game-description`,i.className="difficulty-container-description",this.type===d.sprint?(s.innerHTML="Спринт",i.innerHTML="Спринт - тренировка на скорость. Попробуй угадать как можно больше слов за 60 секунд."):(s.innerHTML="Аудио-вызов",i.innerHTML="Аудио-вызов улучшает твое восприятие речи на слух.");const a=document.createElement("div");a.className="loader loaded",a.id=`${this.type}-loader`,a.innerHTML+='<svg class="loader__image" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\n  <path fill="#fff"\n    d="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z">\n  </path>\n</svg>',n.appendChild(s),n.appendChild(i),t.appendChild(n),this.container.appendChild(e),this.container.appendChild(t),this.container.appendChild(a)}renderDifficulty(){const e=document.createElement("div");e.id=`${this.type}-difficulty-buttons`,e.className="difficulty-buttons";const t=document.createElement("div");t.id=`${this.type}-difficulty-title`,t.className="difficulty-title",t.innerHTML="Выберите сложность игры:";const n=document.createElement("div");n.id=`${this.type}-difficulty-buttons-container`,n.className="difficulty-buttons-container";const s=document.getElementById(`${this.type}-loader`);Object.values(c).forEach((t=>{const i=document.createElement("button");i.addEventListener("click",(async()=>{this.group=+t,n.style.display="none",s.classList.remove("loaded"),await this.generateQuestions(),s.classList.add("loaded")})),i.id=`${t}-button`,i.className="button difficulty-button",i.innerHTML=(+t+1).toString(),e.appendChild(i)})),n.appendChild(t),n.appendChild(e),this.container.appendChild(n)}async generateQuestions(){const e=this.type===d.sprint?100:20,t=[],n=[];if(!this.page&&0!==this.page||!this.group&&0!==this.group){if(!this.page&&(0===this.group||this.group)){for(;t.length<e;){const e=f(30);t.push(u(this.group?.toString(),e.toString()))}(await Promise.all(t)).forEach((e=>{const t=f(20),s=[];s.push(e[t]);const i=this.type===d.sprint?2:5;for(;s.length<i;){const n=f(20);e[t].id!==e[n].id&&s.push(e[n])}n.push({question:e[t].word,rightAnswer:e[t],answers:s})}))}}else{let t=await u(this.group.toString(),this.page.toString());const s=await R(localStorage.getItem("userId")||"");for(t=t.filter((e=>-1===s.indexOf(e.id)));t.length<e;)if(this.page>0){this.page-=1;let e=await u(this.group.toString(),this.page.toString());e=e.filter((e=>-1===s.indexOf(e.id))),t=t.concat(e)}t.forEach((e=>{const s=[];s.push(e);const i=this.type===d.sprint?2:5;for(;s.length<i;){const n=f(t.length);e.id!==t[n].id&&s.push(t[n])}n.push({question:e.word,rightAnswer:e,answers:s})}))}localStorage.getItem("userId")&&(this.userNewWords=await B(localStorage.getItem("userId")||""),this.userWords=await T(localStorage.getItem("userId")||"")),this.generatedQuestions=n}renderQuestion(e){document.getElementById(`${this.type}`).style.display="block";const t=document.getElementById(`${this.type}-score`);if(document.getElementById(`${this.type}-difficulty-container`).style.display="none",this.type===d.sprint){if(document.getElementById(`${this.type}-question-container`)&&document.getElementById(`${this.type}-question-container`).remove(),0===this.questionIndex||!document.getElementById(`${this.type}-question-container`)){const e=document.createElement("div");e.id=`${this.type}-question-container`,e.className="question-container-sprint";const t=document.createElement("h3");t.id=`${this.type}-question-word`,t.className="question-word-sprint";const n=document.createElement("h5");n.id=`${this.type}-question-translate`,n.className="question-translate-sprint";const s=document.createElement("div");s.id=`${this.type}-question-buttons-container`,s.className="question-buttons-sprint";const i=document.createElement("button");i.id=`${this.type}-right-answer-button`,i.innerHTML="Верно",i.className="sprint-answer-button right-answer";const a=document.createElement("button");a.id=`${this.type}-wrong-answer-button`,a.className="sprint-answer-button wrong-answer",a.innerHTML="Не верно",e.appendChild(t),e.appendChild(n),e.appendChild(s),s.appendChild(i),s.appendChild(a),this.container.appendChild(e)}document.getElementById(`${this.type}-difficulty-header`).style.display="none",t.style.display="block",t.style.marginBottom="50px";const n=document.getElementById(`${this.type}-question-word`),s=document.getElementById(`${this.type}-question-translate`),i=document.getElementById(`${this.type}-right-answer-button`),a=document.getElementById(`${this.type}-wrong-answer-button`);n.innerHTML=e.rightAnswer.word;const o=f(2),r=e.answers[o];s.innerHTML=r.wordTranslate,r.id===e.rightAnswer.id?(i.dataset.id=e.rightAnswer.id,a.dataset.id=0===o?e.answers[1].id:e.answers[0].id):(a.dataset.id=e.rightAnswer.id,i.dataset.id=r.id),this.questionIndex+=1;const d=e=>{"ArrowLeft"===e.code&&i.click(),"ArrowRight"===e.code&&a.click()},c=async n=>{if(n.target){const s=n.target.dataset?.id;s===e.rightAnswer.id?(await this.updateWordStats(!0,e),this.score+=10,this.rightAnswers+=1,this.correctAnswersInRow+=1,this.rightAnswersArray?.push(e.rightAnswer),this.correctAnswersInRow%3==0&&(this.score+=40,t.innerHTML=`Текущий счёт: ${this.score}`),t.innerHTML=`Текущий счёт: ${this.score}`):(await this.updateWordStats(!1,e),this.longestRightSeries<this.correctAnswersInRow&&(this.longestRightSeries=this.correctAnswersInRow),this.wrongAnswers+=1,this.wrongAnswersArray?.push(e.rightAnswer),this.correctAnswersInRow=0),this.generatedQuestions&&(n.target.removeEventListener("click",c),document.removeEventListener("keydown",d),this.questionIndex<this.generatedQuestions.length?this.renderQuestion(this.generatedQuestions[this.questionIndex]):(document.getElementById(`${this.type}-timer-container`).style.display="none",this.time=0,await this.renderSummary()))}};i.addEventListener("click",c),a.addEventListener("click",c),document.addEventListener("keydown",d)}else if(this.type===d.audiocall){const s=new Audio(`${l}/${e.rightAnswer.audio}`),i=()=>{s.play()};if(document.getElementById(`${this.type}-question-container`)&&document.getElementById(`${this.type}-question-container`).remove(),0===this.questionIndex||!document.getElementById(`${this.type}-question-container`)){const a=document.createElement("div");a.id=`${this.type}-question-container`,a.className="question-container-audiocall";const o=document.createElement("div");o.id=`${this.type}-question-word`,o.className="question-word-audiocall",o.addEventListener("click",i);const r=document.createElement("div");r.id=`${this.type}-question-buttons-container`,r.className="question-buttons-audiocall",this.questionIndex+=1;const d=e=>{const t=document.getElementsByClassName("question-button-audiocall");Array.from(t).forEach((t=>{t.dataset?.number===e.code[e.code.length-1]&&t.click()}))},c=async n=>{if(n.target){const s=n.target,a=n.target.dataset?.id;if(a===e.rightAnswer.id?(s.style.backgroundColor="green",await this.updateWordStats(!0,e),this.score+=10,this.rightAnswers+=1,this.correctAnswersInRow+=1,this.rightAnswersArray?.push(e.rightAnswer),this.correctAnswersInRow%3==0&&(this.score+=40,t.innerHTML=`Текущий счёт: ${this.score}`),t.innerHTML=`Текущий счёт: ${this.score}`):(s.style.backgroundColor="red",await this.updateWordStats(!1,e),this.longestRightSeries<this.correctAnswersInRow&&(this.longestRightSeries=this.correctAnswersInRow),this.wrongAnswers+=1,this.wrongAnswersArray?.push(e.rightAnswer),this.correctAnswersInRow=0),this.generatedQuestions)if(n.target.removeEventListener("click",c),document.removeEventListener("keydown",d),o.removeEventListener("click",i),this.questionIndex<this.generatedQuestions.length)this.renderQuestion(this.generatedQuestions[this.questionIndex]);else{const e=document.getElementById(`${this.type}-timer-container`);e&&(e.style.display="none"),this.time=0,await this.renderSummary()}}};(n=e.answers,n.sort((()=>Math.random()-.5))).forEach(((e,t)=>{const n=document.createElement("button");n.id=`${this.type}-answer-button-${e.id}-${t+1}`,n.className="question-button-audiocall",n.dataset.id=e.id,n.dataset.number=(t+1).toString(),n.innerHTML=e.wordTranslate,n.addEventListener("click",c),document.addEventListener("keydown",d),r.appendChild(n)}));const l=document.createElement("div");l.id=`${this.type}-without-answer-container`;const m=document.createElement("button");m.id=`${this.type}-without-answer-button`,m.className="audiocall-without-answer-button",m.innerHTML="Не знаю",l.appendChild(m),a.appendChild(o),a.appendChild(r),a.appendChild(l),this.container.appendChild(a),s.play()}}var n}async renderSummary(){const n=await x(localStorage.getItem("userId")||"");if(console.log(n),n)this.type===d.sprint&&(n.optional.gameStatistic.sprint.correctAnswers=this.rightAnswers,n.optional.gameStatistic.sprint.wrongAnswers=this.wrongAnswers,n.optional.gameStatistic.sprint.correctAnswers=this.correctAnswersInRow,[n.optional.gameStatistic.sprint.lastChanged]=(new Date).toISOString().split("T"),n.optional.gameStatistic.sprint.learnedWords=this.learnedWords),this.type===d.audiocall&&(n.optional.gameStatistic.audioCall.correctAnswers=this.rightAnswers,n.optional.gameStatistic.audioCall.wrongAnswers=this.wrongAnswers,n.optional.gameStatistic.audioCall.correctAnswers=this.correctAnswersInRow,[n.optional.gameStatistic.audioCall.lastChanged]=(new Date).toISOString().split("T"),n.optional.gameStatistic.audioCall.learnedWords=this.learnedWords),delete n.id,await H(localStorage.getItem("userId")||"",n);else{const e={learnedWords:this.learnedWords,optional:{gameStatistic:{sprint:{correctAnswers:0,lastChanged:(new Date).toISOString().split("T")[0],learnedWords:0,longestSeries:0,wrongAnswers:0},audioCall:{correctAnswers:0,lastChanged:(new Date).toISOString().split("T")[0],learnedWords:0,longestSeries:0,wrongAnswers:0}},wordStatistic:void 0}};this.type===d.sprint&&(e.optional.gameStatistic.sprint.correctAnswers=this.rightAnswers,e.optional.gameStatistic.sprint.wrongAnswers=this.wrongAnswers,e.optional.gameStatistic.sprint.correctAnswers=this.correctAnswersInRow,[e.optional.gameStatistic.sprint.lastChanged]=(new Date).toISOString().split("T"),e.optional.gameStatistic.sprint.learnedWords=this.learnedWords),this.type===d.audiocall&&(e.optional.gameStatistic.audioCall.correctAnswers=this.rightAnswers,e.optional.gameStatistic.audioCall.wrongAnswers=this.wrongAnswers,e.optional.gameStatistic.audioCall.correctAnswers=this.correctAnswersInRow,[e.optional.gameStatistic.audioCall.lastChanged]=(new Date).toISOString().split("T"),e.optional.gameStatistic.audioCall.learnedWords=this.learnedWords),console.log(e),delete e.id,await H(localStorage.getItem("userId")||"",e)}document.getElementById(`${this.type}-score`).style.display="none",document.getElementById(`${this.type}-question-container`).style.display="none";const s=document.createElement("div"),i=document.createElement("h3"),a=document.createElement("div"),o=document.createElement("h3"),r=document.createElement("div"),c=document.createElement("h3");s.id=`${this.type}-results`,s.className="game-results",i.id=`${this.type}-results-header`,i.className="game-results-header",a.id=`${this.type}-correct-answers`,a.className="game-correct-answers",o.id=`${this.type}-correct-answers-header`,o.className="game-correct-answers-header",o.innerHTML=`Правильные ответы: ${this.rightAnswers}`,r.id=`${this.type}-wrong-answers`,r.className="game-wrong-answers",c.id=`${this.type}-wrong-answers-header`,c.className="game-wrong-answers-header",c.innerHTML=`Ошибки: ${this.wrongAnswers}`,s.appendChild(i),a.appendChild(o),this.rightAnswersArray&&this.rightAnswersArray.forEach((e=>{const t=document.createElement("div");t.id=`${e.id}-results-container`,t.className="game-word-results-container";const n=document.createElement("div"),s=new Audio(`${l}/${e.audio}`);n.id=`${e.id}-results-audio`,n.className="game-word-results-audio",n.addEventListener("click",(()=>s.play()));const i=document.createElement("div");i.id=`${e.id}-results-description`,i.className="game-word-results-description",i.innerHTML=e.word;const o=document.createElement("div");o.id=`${e.id}-results-translate`,o.className="game-word-results-translate",o.innerHTML=e.wordTranslate,t.appendChild(n),t.appendChild(i),t.appendChild(o),a.appendChild(t)})),r.appendChild(c),this.wrongAnswersArray&&this.wrongAnswersArray.forEach((e=>{const t=document.createElement("div");t.id=`${e.id}-results-container`,t.className="game-word-results-container";const n=document.createElement("div"),s=new Audio(`${l}/${e.audio}`);n.id=`${e.id}-results-audio`,n.className="game-word-results-audio",n.addEventListener("click",(()=>s.play()));const i=document.createElement("div");i.id=`${e.id}-results-description`,i.className="game-word-results-description",i.innerHTML=e.word;const a=document.createElement("div");a.id=`${e.id}-results-translate`,a.className="game-word-results-translate",a.innerHTML=e.wordTranslate,t.appendChild(n),t.appendChild(i),t.appendChild(a),r.appendChild(t)})),s.appendChild(a),s.appendChild(r);const m=document.createElement("div");new e(m,"button","button route-btn route-btn_main","",`${t}`).node.onclick=()=>{this.onStartPage()},s.appendChild(m),this.container.appendChild(s)}startGame(){this.generatedQuestions&&this.renderQuestion(this.generatedQuestions[this.questionIndex]),this.type===d.sprint&&this.renderTimer()}renderTimer(){const e=document.createElement("div");e.id=`${this.type}-timer-container`,e.className="timer-container",e.innerHTML=`${this.time}`;const t=setInterval((async()=>{this.time>0&&(this.time-=1,e.innerHTML=`${this.time}`),0===this.time&&this.generatedQuestions&&(clearInterval(t),await this.renderSummary())}),1e3);this.container.appendChild(e)}async render(){if(await this.renderTitle(),this.page||this.group){const e=document.getElementById(`${this.type}-loader`);e.classList.remove("loaded"),await this.generateQuestions(),e.classList.add("loaded")}else await this.renderDifficulty();const e=setInterval((()=>{this.generatedQuestions&&(this.startGame(),clearInterval(e))}),1e3)}}const P=class extends e{constructor(e,t){super(null);const n=document.createElement("div");n.classList.add("sprint"),e||t||new W(n,d.sprint).render(),!e&&0!==e||!t&&0!==t||new W(n,d.sprint,e,t).render();const s=document.getElementById("main");s&&s.append(n)}},q=class extends e{constructor(e,t){super(null);const n=document.createElement("div");n.classList.add("audiocall"),e||0===e||t||0===t||new W(n,d.audiocall).render(),!e&&0!==e||!t&&0!==t||(console.log(e),console.log(t),new W(n,d.audiocall,e,t).render());const s=document.getElementById("main");s&&s.append(n)}};class O{constructor(e){this.container=e}async render(){const e=await x(localStorage.getItem("userId")||""),t=await async function(e){const t=`{"userWord.optional.newWord": "${(new Date).toISOString().split("T")[0]}"}`;try{const n=await fetch(`${m.usersEndpoint}/${e}/aggregatedWords?wordsPerPage=3600&filter=${t}`,{method:"GET",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH});return 401===n.status&&(L(e),R(e)),(await n.json())[0].paginatedResults?.length||0}catch(e){return e}}(localStorage.getItem("userId")||""),n=await async function(e){const t=`{"$and":[{"userWord.optional.isLearned": "${(new Date).toISOString().split("T")[0]}", "userWord.difficulty":"easy"}]}`;try{const n=await fetch(`${m.usersEndpoint}/${e}/aggregatedWords?wordsPerPage=3600&filter=${t}`,{method:"GET",headers:m.HEADERS_FOR_REQUESTS_WITH_AUTH});return 401===n.status&&(L(e),R(e)),(await n.json())[0].paginatedResults?.length||0}catch(e){return e}}(localStorage.getItem("userId")||"");if(e){const s=document.createElement("div");s.id="statistics-container",s.className="statistics-container";const i=document.createElement("div");i.id="sprint-statistics-container",i.className="sprint-statistics-container";const a=document.createElement("h2"),o=document.createElement("p"),r=document.createElement("p"),d=document.createElement("p");a.innerHTML="Спринт",o.innerHTML=`Новых слов за день: ${e.optional.gameStatistic.sprint.learnedWords}`,r.innerHTML=`Процент правильных ответов: ${Math.round(e.optional.gameStatistic.sprint.correctAnswers/(e.optional.gameStatistic.sprint.correctAnswers+e.optional.gameStatistic.sprint.wrongAnswers))}`,d.innerHTML=`Самая длинная серия ответов без ошибок: ${e.optional.gameStatistic.sprint.longestSeries}`,i.appendChild(a),i.appendChild(o),i.appendChild(r),i.appendChild(d);const c=document.createElement("div");c.id="audiocall-statistics-container",c.className="audiocall-statistics-container";const l=document.createElement("h2");l.innerHTML="Аудио-вызов";const m=document.createElement("p"),u=document.createElement("p"),p=document.createElement("p");m.innerHTML=`Новых слов за день: ${e.optional.gameStatistic.audioCall.learnedWords}`,u.innerHTML=`Процент правильных ответов: ${Math.round(e.optional.gameStatistic.audioCall.correctAnswers/(e.optional.gameStatistic.audioCall.correctAnswers+e.optional.gameStatistic.audioCall.wrongAnswers))}`,p.innerHTML=`Самая длинная серия ответов без ошибок: ${e.optional.gameStatistic.audioCall.longestSeries}`,c.appendChild(l),c.appendChild(m),c.appendChild(u),c.appendChild(p);const h=document.createElement("div");h.id="words-stats",h.className="words-stats";const g=document.createElement("h2"),w=document.createElement("p"),y=document.createElement("p"),E=document.createElement("p");g.innerHTML="Статистика по словам за день",w.innerHTML=`Новых слов за день: ${t}`,y.innerHTML=`Изученных слов за день: ${n}`,E.innerHTML=`Общий процент правильных ответов: ${Math.round((e.optional.gameStatistic.audioCall.correctAnswers+e.optional.gameStatistic.sprint.correctAnswers)/e.optional.gameStatistic.audioCall.correctAnswers+e.optional.gameStatistic.sprint.correctAnswers+e.optional.gameStatistic.audioCall.wrongAnswers+e.optional.gameStatistic.sprint.wrongAnswers)}`,h.appendChild(g),h.appendChild(w),h.appendChild(y),h.appendChild(E),s.appendChild(i),s.appendChild(c),s.appendChild(h),this.container.appendChild(s)}else this.container.innerHTML="Нет данных"}}const U=class extends e{constructor(){super(null);const e=document.createElement("div");e.classList.add("statistics"),new O(e).render();const t=document.getElementById("main");t&&t.append(e)}};new class extends e{constructor(){super(null),this.mainCycle()}mainCycle(){const e=document.getElementById("button-login"),t=document.getElementById("header-ui"),s=new k(t,n,"modal-window-login",[{name:"email",title:"E-mail",placeholder:"Please enter an e-mail",type:"email",required:!0},{name:"password",title:"Password",placeholder:"Please enter a password",type:"password",required:!0,minLength:8}],"Login",M);s.render(),e.addEventListener("click",(()=>{e.classList.contains("logout")||(document.getElementById(s.id).style.display="block")}));const i=new $,a=new k(document.body,n,"modal-window-registration",[{name:"email",title:"E-mail",placeholder:"Please enter an e-mail",type:"email",required:!0},{name:"name",title:"Name",placeholder:"Please enter a Name",type:"text",required:!0,minLength:3},{name:"password",title:"Password",placeholder:"Please enter a password",type:"password",required:!0,minLength:8}],"Registration",_);a.render(),i.onRegistration=()=>{localStorage.getItem("token")||(document.getElementById(a.id).style.display="block")},i.onProjectInfo=()=>{i.destroyСontent(document.getElementById("main"));const e=new o;e.onStartPage=()=>{e.destroyСontent(document.getElementById("main")),e.destroyСontent(document.getElementById("nav")),this.mainCycle()}},i.onAboutPage=()=>{i.destroyСontent(document.getElementById("main"));const e=new v;e.onStartPage=()=>{e.destroyСontent(document.getElementById("main")),e.destroyСontent(document.getElementById("nav")),this.mainCycle()}},i.onTextbookPage=()=>{i.destroyСontent(document.getElementById("main"));const e=new E;e.onStartPage=()=>{e.destroyСontent(document.getElementById("main")),e.destroyСontent(document.getElementById("nav")),this.mainCycle()},e.onSprint=()=>{i.destroyСontent(document.getElementById("main")),new P(+(localStorage.getItem("textbookSection")||0),+(localStorage.getItem("textbookPage")||0))},e.onAudioCall=()=>{i.destroyСontent(document.getElementById("main")),new q(+(localStorage.getItem("textbookSection")||0),+(localStorage.getItem("textbookPage")||0))}},(new N).addListeners(),i.onSprint=()=>{i.destroyСontent(document.getElementById("main")),new P},i.onAudioCall=()=>{i.destroyСontent(document.getElementById("main")),new q},i.onStatPage=()=>{i.destroyСontent(document.getElementById("main")),new U}}}})();